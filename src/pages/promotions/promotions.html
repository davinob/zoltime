<!--
  Generated template for the ProductsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  
    <ion-navbar>
      <button ion-button menuToggle>
        <ion-icon name="menu"></ion-icon>
      </button>
      <ion-title>My Promotions</ion-title>
    </ion-navbar>
  
  </ion-header>
  
  
  <ion-content  class="global" padding *ngIf="sellerService.getCurrentSeller() as user ">

      
                <button ion-button (click)="addPromotion()">
                    Add promotion
                  </button>
           
                  <ion-list  *ngIf="sellerService.getSellerPromotions() as promotions ">
                      <ion-card  *ngFor="let promotion of promotions">
                        <ion-item-sliding>
                           
                          <ion-item text-wrap>
                              <ion-grid >
                                      <ion-row (click)='editPromotion(promotion)'>
                                          <span  class="productName" >{{promotion.name}}</span>
                                        </ion-row> 
                                        <ion-row (click)='editPromotion(promotion)'>
                                        <span class="prodPic" *ngFor="let product of getProductsOfPromotion(promotion)">
                                         <img class="profile-image" src="{{product.picture.url}}" cache="true"/>
                                        </span>
                                 
                                       </ion-row>
                                   
                                        <ion-row [hidden]="!shouldShowPromotion(promotion)">
                                           <ion-col align-self-center>
                                              <span class="productName">{{getCurrentPromotionTimerMessage(promotion)}}</span>
                                           </ion-col>
                                      </ion-row>

                                          <ion-row >
                                              <ion-col  [hidden]="isPromotionExpired(promotion)" align-self-center>
                                       <button [hidden]="shouldShowPromotion(promotion)" class="publishPromo" ion-button (click)="startPromo(promotion)">
                                          Start
                                        </button>
                                      <button [hidden]="!shouldShowPromotion(promotion)" class="stopPromo"  ion-button (click)="stopPromo(promotion)">
                                           Stop
                                       </button>
                                      </ion-col>
                                      <ion-col  [hidden]="!isPromotionExpired(promotion)" align-self-center>
                                          <span >Promotion Expired</span>
                                      </ion-col>

                                    </ion-row>
                                 
                               
                                  </ion-grid>
                                </ion-item>
                               <ion-item-options  (ionSwipe)="removeInput(promotion)" side="right" icon-start>
                               </ion-item-options>
                         
                      </ion-item-sliding>
                        </ion-card>
    
                  </ion-list>
        
   
   
  
  </ion-content>
  