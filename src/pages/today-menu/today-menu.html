<!--
  Generated template for the TodayMenuPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Today Menu</ion-title>
  </ion-navbar>

</ion-header>


<ion-content  class="global" padding *ngIf="userService.getCurrentUser() as user ">
 

    <div class="promotions" >
  <ion-grid *ngIf="!shouldShowCurrentPromotion()">
        <ion-row>
            <ion-col (click)='showPromotionStartTime()' align-self-center>
                <span > Promotion Start</span>
                <span>{{user.promotionStartTime}}</span>
             
             </ion-col>
             <ion-col (click)='showPromotionEndTime()' align-self-center>
                <span > Promotion End</span>
                <span>{{user.promotionEndTime}}</span>
             
             </ion-col>
          
        </ion-row>
      </ion-grid>
      <div *ngIf="shouldShowCurrentPromotion()">
        {{getCurrentPromotionTimerMessage()}}
      </div> 
    </div>    

    
              
              <button ion-button (click)="addProduct()">
                  Add product
                </button>
                

               <ion-list  *ngIf="userService.getCurrentDefaultProducts() as products ">
                  <ion-card  *ngFor="let product of products">
                      <ion-item-sliding>
                       
                      <ion-item text-wrap>
                          <ion-grid>
                              <ion-row >
                                  <ion-col (click)="updatePicture(product)" col-5>
                                      <img  src="{{product.picture.url}}"/>
                                      </ion-col>
                                      <ion-col (click)='editProduct(product)'>
                                          <ion-row >
                                          <span  class="productName" >{{product.name}}</span>
                                        </ion-row> 
                                        <ion-row >
                                          <span class="productQuantity" >Quantity: {{product.quantity}}</span>
                                        </ion-row >
                                        <ion-row >
                                            <span  class="productName" >  Price: <del>{{product.originalPrice}}  </del>  {{product.reducedPrice}} â‚ª </span>
                                          </ion-row >
                                      </ion-col>
                                    </ion-row >
                                   <ion-row (click)='editProduct(product)'>
                                   <ion-col>
                                     <span   class="productDescription" >{{product.description}}</span>
                                  </ion-col>
                               </ion-row >
                              </ion-grid>
                           <ion-item-options  (ionSwipe)="removeInput(product)" side="right" icon-start>
                           </ion-item-options>
                      </ion-item> 
                  </ion-item-sliding>
                    </ion-card>

              </ion-list> 
            
   
    <button [hidden]="shouldShowCurrentPromotion()" [disabled]="isPublishDisabled()" ion-button (click)="publishTodayPromotion()">
        Publish today promotion
      </button>
    <button [hidden]="!shouldShowCurrentPromotion()" ion-button (click)="stopTodayPromotion()">
         Stop promotion
     </button>
      
  <ion-datetime #promotionStartTime [hidden]="true" item-end 
  minuteValues="00,05,10,15,20,25,30,35,40,45,50,55" displayFormat="HH:mm" pickerFormat="HH:mm" [(ngModel)]="user.promotionStartTime"></ion-datetime>
  <ion-datetime #promotionEndTime [hidden]="true" item-end 
  minuteValues="00,05,10,15,20,25,30,35,40,45,50,55" displayFormat="HH:mm" pickerFormat="HH:mm" [(ngModel)]="user.promotionEndTime"></ion-datetime>
  <input type="file" #fileInput accept="image/*"  style="visibility: hidden; height: 0px" name="files[]" (change)="processImage($event)" />                      


</ion-content>
